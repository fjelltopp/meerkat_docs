

<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The Explore Component &mdash; WHO-MEERKAT 0.1 documentation</title>
    
    <link rel="stylesheet" href="../../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/bizstyle.js"></script>
    <link rel="top" title="WHO-MEERKAT 0.1 documentation" href="../../index.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../http-routingtable.html" title="HTTP Routing Table"
             >routing table</a> |</li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">WHO-MEERKAT 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">The Explore Component</a><ul>
<li><a class="reference internal" href="#plots">Plots</a></li>
<li><a class="reference internal" href="#the-chart-drawing-process">The Chart Drawing Process</a></li>
<li><a class="reference internal" href="#the-configuration-file">The Configuration File</a></li>
<li><a class="reference internal" href="#dependancies">Dependancies</a></li>
<li><a class="reference internal" href="#javascript-documentation">Javascript Documentation</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/src/frontend/explore.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="the-explore-component">
<h1>The Explore Component<a class="headerlink" href="#the-explore-component" title="Permalink to this headline">¶</a></h1>
<p>The Explore Component is a tool written in Javascript that enables the user to &#8220;explore the data&#8221; by drawing and editing their own tables. This is very different to the prescribed tables and charts made available in the technical component. Python is only used to render the basic template, all further functionality is written in Javascript in the file <em>static/js/explore/explore.js</em> and the template <em>templates/explore/index.html</em>.</p>
<div class="section" id="plots">
<h2>Plots<a class="headerlink" href="#plots" title="Permalink to this headline">¶</a></h2>
<p>At the time of writing there are two plots that can be drawn by the user: a <strong>cross-plot</strong> and a <strong>timeline-plot</strong>.  A cross-plot takes two categories of variables from Meerkat Abacus and cross tabulates the number of cases in each variable. A timeline-plot cross tabulates the number of cases reported each week in a single variable against a category of variables. The timeline-plot can be created from a cross-plot by clicking on a variable, which is then plotted against the opposing axis category. Each plot then has it&#8217;s own set of options that can edited by the user, such as whether the chart is coloured, or empty records are hidden from view.</p>
</div>
<div class="section" id="the-chart-drawing-process">
<h2>The Chart Drawing Process<a class="headerlink" href="#the-chart-drawing-process" title="Permalink to this headline">¶</a></h2>
<p>The state of the table shown should always be entirely stored in the HTML.  Every HTML element that can change the state of a table has a class that identifies it as such e.g. for the cross plot, all links/buttons/input fields that can change the state of the table have a class &#8220;cross-option&#8221;. Every &#8220;option&#8221; element should have a &#8220;name&#8221; and a &#8220;value&#8221; attribute. Upon clicking an option link or button, a Javascript function is often called that handles the updating of the option&#8217;s value attribute (e.g. <code class="docutils literal"><span class="pre">`callStrip()`</span></code>), before calling the <code class="docutils literal"><span class="pre">`redraw()`</span></code> function.  When the <code class="docutils literal"><span class="pre">`redraw()`</span></code> function is called, an options object is created by looping through all option elements and using the &#8220;name&#8221; attribute as the key and the &#8220;value&#8221; attribute as the value. This options object that summaries the complete state of the desired table, is then passed to the <code class="docutils literal"><span class="pre">`createCrossPlot()`</span></code> (or other <code class="docutils literal"><span class="pre">`createXxxPlot()`</span></code> function) to draw the new table. These functions that create the plot are found in the static asset file.</p>
</div>
<div class="section" id="the-configuration-file">
<h2>The Configuration File<a class="headerlink" href="#the-configuration-file" title="Permalink to this headline">¶</a></h2>
<p>The configuration file is a json file loaded into the flask app in the meerkat_frontend module when the server is started up.  It is passed as a Python dictionary to the Jinja2 template and used to correctly render the homepage for a specific country.  The configuration file should contain all country specifics including text, images, titles and map details. Aside from key-value pairs that are shared with most of the other component configuration files, the explore component requires just one other property:</p>
<ul>
<li><p class="first"><strong>categories</strong> An array of catgeories that can be plotted against each other in a cross-plot. Each category is represented by a two element array where each index contains:</p>
<blockquote>
<div><ol class="arabic simple" start="0">
<li>The Category ID taken from Meerkat Abacus.</li>
<li>A name string for use in the category selector element.</li>
</ol>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="dependancies">
<h2>Dependancies<a class="headerlink" href="#dependancies" title="Permalink to this headline">¶</a></h2>
<p>The Explore Component requires a number of Meerkat API calls to be available:</p>
<ul class="simple">
<li><strong>/query_category/&lt;category id&gt;/&lt;category id&gt;/&lt;start date&gt;/&lt;end date&gt;?&lt;options&gt;</strong> to draw the cross-plot.</li>
<li><strong>/query_variable/&lt;variable id&gt;/&lt;category id&gt;/&lt;start date&gt;/&lt;end date&gt;?&lt;options&gt;</strong> to draw the timeline-plot.</li>
<li><strong>/variables/&lt;category&gt;</strong> to get the variable details for a category.</li>
<li><strong>/variable/&lt;variable ID&gt;</strong> to get the variable details for a given variable ID</li>
</ul>
<p>It also depends upon the Bower Component <strong>Bootstrap Tables</strong> to draw the tables.</p>
</div>
<div class="section" id="javascript-documentation">
<h2>Javascript Documentation<a class="headerlink" href="#javascript-documentation" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../http-routingtable.html" title="HTTP Routing Table"
             >routing table</a> |</li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">WHO-MEERKAT 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, Gunnar Ro, Kenrick Turner, Jonathan Berry, Jyri Soppela.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.1.
    </div>
  </body>
</html>